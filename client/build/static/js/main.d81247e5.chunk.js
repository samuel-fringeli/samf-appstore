(window["webpackJsonpasmr-triggers-system"]=window["webpackJsonpasmr-triggers-system"]||[]).push([[0],{18:function(e,t,a){e.exports=a(42)},23:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(17),s=a.n(l),o=(a(23),a(3)),i=a(4),c=a(6),m=a(5),d=a(7),u=a(2),p=a.n(u),h=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).goToVideosList=function(){window.history.pushState({},"ASMR triggers","/"),a.props.appContext.setState({videoId:0})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/api/video-infos/"+this.props.appContext.state.videoId).then((function(t){var a=t.data;"error"in a?e.props.appContext.setState({error:a.error}):(0===a.length&&e.props.appContext.setState({error:"This video doesn't exist"}),e.props.appContext.setState({videoInfos:a[0]}))}))}},{key:"render",value:function(){var e=this.props.appContext.state.videoInfos;return n.a.createElement("div",null,e?n.a.createElement("div",null,n.a.createElement("div",{className:"text-center"},n.a.createElement("h1",null,n.a.createElement("button",{className:"btn btn-primary mr-3",onClick:this.goToVideosList},"Back"),"Video Trigger Croper"),n.a.createElement("br",null),n.a.createElement("video",{controls:"controls",ref:this.props.appContext.videoRef,className:"w-100",src:e["server-url"]})),n.a.createElement("br",null),n.a.createElement("div",{className:"row"},n.a.createElement("form",{className:"col"},n.a.createElement("div",{className:"form-group row mb-1"},n.a.createElement("label",{htmlFor:"url",className:"col-sm-3 col-form-label"},"YouTube URL"),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement("a",{className:"d-block mt-2",href:e.url},e.url))),n.a.createElement("div",{className:"form-group row mb-1"},n.a.createElement("label",{htmlFor:"url",className:"col-sm-3 col-form-label"},"Server URL"),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement("a",{className:"d-block mt-2",href:e["server-url"]},e["server-url"]))),n.a.createElement("div",{className:"form-group row mt-3"},n.a.createElement("label",{htmlFor:"title",className:"col-sm-3 col-form-label"},"Title"),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement("input",{type:"text",readOnly:!0,className:"form-control",id:"title",value:e.title}))))),n.a.createElement("br",null)):n.a.createElement("div",{className:"text-center"},"getting video infos..."))}}]),t}(n.a.Component),v=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={startTime:0,endTime:0,categoryId:null,categoriesList:[]},a.addNewTrigger=function(){var e=a.state,t=e.startTime,r=e.endTime,n=e.categoryId;a.isNumber(t)&&a.isNumber(r)&&a.isNumber(n)?t>=r?alert("Start time must be smaller than end time"):p.a.post("/api/new-trigger/"+a.props.appContext.state.videoId,{startTime:t,endTime:r,categoryId:n}).then((function(e){a.props.appContext.refreshTriggersList(a.props.appContext.state.videoId)})):alert("error. please verify your fields")},a.refreshTime=function(e){return function(){var t={};t[e]=Math.round(100*a.props.appContext.videoRef.current.currentTime)/100,a.setState(t)}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/api/trigger-categories").then((function(t){var a=t.data;"error"in a?e.props.appContext.setState({error:a.error}):e.setState({categoriesList:a,categoryId:1})}))}},{key:"isNumber",value:function(e){return/^[0-9\.]+$/.test(e)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("h1",{className:"text-center"},"New Trigger"),n.a.createElement("br",null),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"url",className:"col-sm-2 col-form-label"},"Category"),n.a.createElement("div",{className:"col-sm-10"},this.state.categoriesList.length>0?n.a.createElement("select",{className:"form-control"},this.state.categoriesList.map((function(t){return n.a.createElement("option",{value:t.id,selected:t.id===e.state.categoryId},t.name)}))):null)),n.a.createElement("div",{className:"form-group row"},n.a.createElement("div",{className:"col-sm-2"}),n.a.createElement("div",{className:"col"},n.a.createElement("div",{className:"row"},n.a.createElement("label",{className:"col-auto col-form-label text-center"},"Start (s)"),n.a.createElement("div",{className:"col pr-1"},n.a.createElement("input",{value:this.state.startTime,type:"text",onChange:function(t){return e.setState({startTime:t.target.value})},className:"form-control"+(this.isNumber(this.state.startTime)?"":" is-invalid")})),n.a.createElement("div",{className:"col-auto pl-1"},n.a.createElement("button",{className:"btn btn-light",onClick:this.refreshTime("startTime")},"\u21bb")))),n.a.createElement("div",{className:"col"},n.a.createElement("div",{className:"row"},n.a.createElement("label",{className:"col-auto col-form-label text-center"},"End (s)"),n.a.createElement("div",{className:"col pr-1"},n.a.createElement("input",{value:this.state.endTime,type:"text",onChange:function(t){return e.setState({endTime:t.target.value})},className:"form-control"+(this.isNumber(this.state.endTime)?"":" is-invalid")})),n.a.createElement("div",{className:"col-auto pl-1"},n.a.createElement("button",{className:"btn btn-light",onClick:this.refreshTime("endTime")},"\u21bb")))),n.a.createElement("div",{className:"col-sm-2"},n.a.createElement("button",{className:"btn btn-primary",onClick:this.addNewTrigger},"Add trigger"))))}}]),t}(n.a.Component),g=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).deleteTrigger=function(e){return function(){p.a.get("/api/delete-trigger/"+e).then((function(e){a.props.appContext.refreshTriggersList(a.props.appContext.state.videoId)}))}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("h1",{className:"text-center mt-5"},"All Triggers"),n.a.createElement("div",{className:"row"},0===this.props.appContext.state.triggersList.length?n.a.createElement("div",{className:"col"},n.a.createElement("div",{className:"text-center"},"No trigger registered for this video")):n.a.createElement("table",{className:"table table-striped mt-3"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Category"),n.a.createElement("th",{scope:"col"},"Start (s)"),n.a.createElement("th",{scope:"col"},"End (s)"),n.a.createElement("th",{scope:"col"}))),n.a.createElement("tbody",null,this.props.appContext.state.triggersList.map((function(t){return n.a.createElement("tr",null,n.a.createElement("td",null,t.category),n.a.createElement("td",null,t["start-time"]),n.a.createElement("td",null,t["end-time"]),n.a.createElement("td",{className:"float-right"},n.a.createElement("button",{className:"btn btn-primary"},"Go"),n.a.createElement("button",{className:"btn btn-danger ml-3",onClick:e.deleteTrigger(t.id)},"Delete")))}))))))}}]),t}(n.a.Component),f=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={searchValue:"",originalVideoList:[],filteredVideoList:[]},a.goToVideo=function(e){return function(){window.history.pushState({},"ASMR triggers","/video/"+e+"/"),a.props.appContext.setState({videoId:e,videoInfos:!1}),a.props.appContext.refreshTriggersList(e)}},a.filterVideoList=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e||a.state.searchValue;return a.state.originalVideoList.filter((function(e){return e.title.toLowerCase().includes(t)}))},a.searchVideos=function(e){var t=Array.from(a.filterVideoList(e.target.value));a.setState({searchValue:e.target.value,filteredVideoList:t})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/api/videos").then((function(t){var a=t.data;"error"in a?e.props.appContext.setState({error:a.error}):e.setState({originalVideoList:a,filteredVideoList:a})}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("h1",{className:"text-center mb-4"},"Video Trigger Croper",n.a.createElement("a",{href:"https://ytdl.pyme.ch?saveInDB=true",target:"_blank",className:"btn btn-dark ml-3"},"Download more videos")),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col"},n.a.createElement("input",{className:"form-control",type:"text",placeholder:"Search...",value:this.state.searchValue,onChange:this.searchVideos}),n.a.createElement("br",null),n.a.createElement("table",{className:"table table-bordered"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Video title"),n.a.createElement("th",{className:"text-center"},"Video on Youtube"),n.a.createElement("th",{className:"text-center"},"Video details"))),n.a.createElement("tbody",null,this.state.filteredVideoList.map((function(t){return n.a.createElement("tr",null,n.a.createElement("td",{className:"align-middle"},t.title),n.a.createElement("td",{className:"text-center"},n.a.createElement("a",{className:"text-white btn btn-danger",target:"_blank",href:t.url},"Go")),n.a.createElement("td",{className:"text-center"},n.a.createElement("button",{className:"btn btn-primary",onClick:e.goToVideo(t.id)},"Go")))})))))))}}]),t}(n.a.Component),E=(a(41),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).firstLoad=!0,a.urlMatch=window.location.href.split("/video/"),a.state={videoId:a.urlMatch.length>1?a.urlMatch[1].replace("/",""):0,triggersList:[],error:!1,videoInfos:!1},a.videoRef=n.a.createRef(),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"refreshTriggersList",value:function(e){var t=this;p.a.get("/api/video-triggers/"+e).then((function(e){var a=e.data;"error"in a?t.setState({error:a.error}):t.setState({triggersList:a})}))}},{key:"componentDidMount",value:function(){this.urlMatch.length>1&&this.firstLoad&&this.refreshTriggersList(this.state.videoId),this.firstLoad=!1}},{key:"render",value:function(){return n.a.createElement("div",{className:"container mb-4 mt-4"},this.state.error?n.a.createElement("div",{className:"alert alert-danger text-center mt-4"},this.state.error):0===this.state.videoId?n.a.createElement("div",null,n.a.createElement(f,{appContext:this})):this.state.videoInfos?n.a.createElement("div",null,n.a.createElement(h,{appContext:this}),n.a.createElement(v,{appContext:this}),n.a.createElement(g,{appContext:this})):n.a.createElement(h,{appContext:this}))}}]),t}(n.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.d81247e5.chunk.js.map